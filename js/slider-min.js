class Slider{constructor(t){this.slider=document.querySelector(t),this.frame=this.slider.querySelector(".slider__frame"),this.items=this.frame.children,this.itemsCount=this.items.length,this.position=0,this.itemWidth=580,this.isAnimated=!1,this.handlers=[]}addListener(t,e,i){this.handlers.push({elem:t,event:e,handler:i}),t.addEventListener(e,i)}init(){let t=Math.ceil(this.slider.clientWidth/this.itemWidth);t<this.itemsCount&&(t=this.itemsCount);for(let e=0,i=0;e<3*t-this.itemsCount;e++){let t=this.items[i].cloneNode(!0);this.frame.appendChild(t),i=i==this.itemsCount-1?0:i+1}for(let e=-t;e<2*t;e++)this.items[e+t].style.position="absolute",this.items[e+t].style.left=`${e*this.itemWidth}px`}smoothScroll(t){const e=this;let i=this.frame.getBoundingClientRect().left,s=(Math.abs(t-i),30);!function n(){i<t?(e.isAnimated=!0,i=(i+=s)<t?i:t,setTimeout(()=>{e.frame.style.transform=`translateX(${i}px)`,n()},20)):i>t?(e.isAnimated=!0,i=(i-=s)>t?i:t,setTimeout(()=>{e.frame.style.transform=`translateX(${i}px)`,n()},20)):e.isAnimated=!1}()}moveTo(){let t=this.frame.getBoundingClientRect().left;this.position=Math.round(t/this.itemWidth);let e=this.position*this.itemWidth-t;return Math.abs(this.position)>=this.itemsCount&&(this.position=this.position>0?this.position-this.itemsCount:this.position+this.itemsCount),this.frame.style.transform=`translateX(${this.position*this.itemWidth-e}px)`,e}align(t){this.smoothScroll(this.position*this.itemWidth)}moveLeft(){this.isAnimated||(this.moveTo(),this.position--,this.smoothScroll(this.position*this.itemWidth))}moveRight(){this.isAnimated||(this.moveTo(),this.position++,this.smoothScroll(this.position*this.itemWidth))}drag(t){let e,i,s,n=this,o=this.frame;function h(t){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();let n=m(t)-i;Math.abs(n)<3||function(t){o.style.transform=`matrix(1,0,0,1,${t},0)`}(s=m(t)-i+e)}function r(e){document.removeEventListener(t[1],h),document.removeEventListener(t[2],r),n.moveTo(),n.smoothScroll(n.position*n.itemWidth)}function m(t){return t instanceof MouseEvent?t.pageX:t instanceof TouchEvent?t.changedTouches[0].pageX:void 0}this.addListener(o,t[0],function(s){s.which&&1!=s.which||(e=o.getBoundingClientRect().left,i=m(s),o.ondragstart=function(){return!1},n.addListener(document,t[1],h),n.addListener(document,t[2],r))})}wheel(){const t=this;this.addListener(t.slider,"wheel",function(e){let i=e.deltaY||e.detail||e.wheelDelta;i<0&&t.moveRight(),i>0&&t.moveLeft(),e.preventDefault()})}animate(){this.slider.classList.add("slider--inview"),document.querySelector(".works__button--prev").classList.add("works__button--prev-inview"),document.querySelector(".works__button--next").classList.add("works__button--next-inview");for(let t=0;t<this.items.length;t++)t>=this.itemsCount&&(this.items[t].style.animationDelay=`${.4+.3*(t-3)}s`)}}const mq=window.matchMedia("(min-width: 768px)");var s;function widthChange(t){if(mq.matches){(s=new Slider(".slider")).init(),s.drag(["mousedown","mousemove","mouseup"]),s.drag(["touchstart","touchmove","touchend"]),s.wheel(),document.querySelector(".slider__next").onclick=function(t){s.moveRight()},document.querySelector(".slider__prev").onclick=function(t){s.moveLeft()},window.addEventListener("scroll",function(){isVisible(document.querySelector(".slider"))&&s.animate()})}else{if(!s)return;s.frame.style="",s.handlers.forEach(t=>{t.elem.removeEventListener(t.event,t.handler)});let t=s.items.length;for(var e=0;e<t;e++)e<s.itemsCount?s.items[e].style="":s.frame.removeChild(s.items[s.itemsCount])}}mq.addListener(widthChange),widthChange(mq);